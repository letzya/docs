---
title: "Troubleshooting and Debugging"
description: "Tyk troubleshooting and debugging gateway, streams, pump, dashboard"
sidebarTitle: "Troubleshooting and Debugging"
tags: ['troubleshooting', 'debugging', 'Open Source', 'Self-Managed', 'Tyk Cloud', 'API Gateway']
---

## Gateway

1. ##### Users receive 499 error in the Gateway

    **Cause**

    The Gateway receives closed client responses from the upstream client. There are number of different configuration settings that could bring about this issue.

    **Solution**

    For a standard web app, used by standard HTTP clients 499 errors are not a problem.
    ​

    However, in some specific cases, depending on the service you provide, your clients can have their own fixed constraints. 
    For example, if you are building an API used by IoT devices, and those devices internally have a strict  2 second timeout for HTTP calls and your service responding with > 2 seconds. In this case a lot of 499 errors may mean that a lot of clients are malfunctioning, and you should investigate this behavior.

    On the other hand, sometimes a client closing the connection before reading the server response is expected functionality. Taking the same example as above, you may have some IoT sensor, which just pushes data to your servers in "fire and forgot" mode, and does not care about the server response. In this case a 499 error is completely expected behavior.


2. ##### Users receive 502 error in the Gateway

    **Cause**

    The Gateway received an invalid response from the upstream server. There are number of different configuration settings that could bring about this issue.

    **Solution**

    Try using the following settings in your tyk.conf file:

    ```{.copyWrapper}
    enable_detailed_recording: false, 
    enable_jsvm: false,
    ```


    And the following key-value pairs should be set in the relevant API definition:

    ```{.copyWrapper}
    proxy.service_discovery.use_nested_query = false
    proxy.service_discovery.use_target_list = true
    proxy.service_discovery.endpoint_returns_list = true
    proxy.service_discovery.data_path = ""Address”
    proxy.service_discovery.port_data_path = “ServicePort""
    ```
        
    See [Tyk Gateway configuration](/tyk-oss-gateway/configuration) and [Tyk Gateway API](/api-management/gateway-config-tyk-classic) for further information regarding API definition settings.

3. ##### Gateway proxy error "context canceled"

    In some cases you can see "proxy error: context canceled" error message in the Gateway logs.
    The error itself means that the connection was closed unexpectedly. 
    It can happen for various reasons, and in some cases it is totally fine: for example client can have unstable mobile internet.

    When it happens on the high load, it can be a lot of different reasons.
    For example your OS is running out of system limits, like number of opened sockets, and to validate it, you need to try your system limits.
    See [this guide](/tyk-self-managed#resource-limits).

    Additionally, it can be CPU bottleneck: you can't process more than your machine  can do.
    And note that it is not only about the actual utilization %, it is also about context switches it has to do. 
    E.g. having one job which consume 100% of your CPU/cores vs having a few thousands jobs, causing CPU constantly switch between them. 
    Such problems cause internal request processing queues, which cause latency growth (highly recommend measure it). 
    And in some cases latency can grow so big, that some clients can just disconnect/timeout because of it. 

    Additionally, highly recommend read the following blog post https://tyk.io/blog/performance-tuning-your-tyk-api-gateway/.
    For example, you can trade memory for performance, and context switch reduction by tuning garbage collector to run less frequently: see `Tuning Tyk’s Garbage Collector` section.


    Also note that it is not Tyk or Golang specific.
    The problem described above will happen with any webserver on high scale. 
    So in general if you see a lot of "context" errors on high load, use it as a sign that the process is really struggling with the given load, and you need scale it up, either vertically or horizontally. 

4. ##### Invalid memory address or nil pointer dereference error

    **Cause**

    There are a number of reasons, most commonly, an API may have been configured incorrectly in some way (for instance, it may have been set up without an organization). The error itself is a specific to Go language which Tyk was written in and could also suggest that alterations made to the code by the user could also be the culprit.

    **Solution**

    Make sure that API definitions are set up correctly. Information on how to do this with the Tyk Gateway API can be found in the following links:

    *   [API Definition Object Details](/api-management/gateway-config-tyk-classic)
    *   [API Management](/tyk-gateway-api)

5. ##### Users receive this error message when attempting to make API calls to an existing key.

    **Cause**
    When the token was created, most probably it was configured without the `meta_data` key.

    **Solution**
    The user will need to add the key-value pair `meta_data: {}` to their key as per the [Tyk Gateway REST API Documentation](/tyk-gateway-api).

6. ##### There was a problem proxying the request

    **Cause**

    The upstream server may have returned an empty response or cut the response off early so it was unable to complete the proxying process. A proxy error means actual connectivity issues between Tyk and the target host (i.e., a connection-level issue with the downstream server misbehaving for some reason).

    Expired TLS certificates may also cause issues.

    **Solution**

    Users are advised to upgrade to the latest versions of any Tyk packages at their earliest convenience as a patch was released to resolve this issue. Packages are available to download from [Packagecloud.io][1]. See [Upgrading Tyk](/developer-support/upgrading) for details on upgrading to the latest version. It may also be worth checking if any TLS certificates associated with the domain have expired.

    [1]: https://packagecloud.io/tyk

6. ##### Tyk Gateway Profiling

    In some cases, to identify tricky issues like concurrency or memory related issues, it may be required to get information about the Gateway process runtime. For example, memory or CPU usage details.
    The Tyk Gateway is built using Go, and inherits its powerful profiling tools, specifically Google's [`pprof`](https://github.com/google/pprof/).

    The Tyk Gateway can generate various profiles in the `pprof` supported format, which you can analyze by yourself, using the `go tool pprof` command, or you can send the profiles to our support team for analysis.

    There are two way to get profiles:

    1. Running the process with flags mentioned below which will gather information about the running process for the first 30 seconds, and will generate files containing profiling info:

        * `--memprofile` - memory profile, generates `tyk.mprof` file
        * `--cpuprofile` - CPU usage profile, generates `tyk.prof` file
        * `--blockprofile` - Blocking profile, generates `tyk.blockprof` file
        * `--mutexprofile` - Mutex profile, generates `tyk.mutexprof` file

    2. Running with the `--httpprofile` flag, or set `enable_http_profiler` to `true` in tyk.conf, which will run a special `/debug/pprof/` public web page, containing dynamic information about the running process, and where you can download various profiles:

        * goroutine    - stack traces of all current goroutines
        * heap         - a sampling of all heap allocations
        * threadcreate - stack traces that led to the creation of new OS threads
        * block        - stack traces that led to blocking on synchronisation primitives
        * mutex        - stack traces of holders of contended mutexes

7. ##### Support Information

    When contacting support, you may be asked to supply extra information and supply log files, etc, so we can quickly handle your request. Questions may include:

    * "Can you send us your log files"
    * "Can you change the logging detail level"
    * "What version of Tyk are you on"
    * "What profiling information can I get"


    This page will let you know how to get the above info to us.

    **Log Files**

    **Where do I find my log files?**

    The Gateway will log its output to `stderr` and `stdout`. In a typical installation, these will be handled or redirected by the service manager running the process, and depending on the Linux distribution, will either be output to `/var/log/` or `/var/log/upstart`.

    Tyk will try to output structured logs, and so will include context data around request errors where possible.

    **How do I increase Logging Verbosity?**

    You can set the logging verbosity in two ways:

    1. Via an Environment Variable to affect all Tyk components
    2. Just for the Gateway via your `tyk.conf` config file  

    **Setting via Environment Variable**

    The environment variable is `TYK_LOGLEVEL`.

    By default, the setting is `info`. You also have the following options:

    * `debug`
    * `warn`
    * `error`

    You will be advised by support which setting to change the logging level to.

    **For the Gateway**

    You can set the logging level in your `tyk.conf` by adding the following:

    ```{.copyWrapper}
    "log_level": "info",
    ```

    By default, the setting is `info`. You also have the following options:

    * `debug`
    * `warn`
    * `error`

    You will be advised by support which setting to change the logging level to.

    **Tyk Version**

    For support requests it is beneficial to provide more information about your Gateway build. These pinpoint the exact Gateway build that is in use.

    - Since Gateway version `5.0.8` or `5.2.3` you can inspect detailed build information by running `tyk version`. The information also includes the Go version it was built with, the operating system and architecture.

    - If you're running an an older version than the above, `tyk --version` prints out the release version for your Gateway binary.

    The binary is installed in `/opt/tyk-gateway/tyk` by default. If your binary is not available in your `PATH` environment, invoke it from there.

    **Profile Information**

    You can provide various profile information for us in [pprof format](https://github.com/google/pprof/). See [Gateway Profiling](/#tyk-gateway-profiling) for more details.

8. ##### API definition URL case sensitive

    For security reasons Tyk lowercases the URL before performing any pattern matching.

9. ##### Gateway detected 0 APIs

    Tyk Gateway is not able to get API configs from the Tyk Portal.
    If you configured your Gateway to be segmented, you would also need to assign tags and you must also tag the APIs in the API Designer to make sure that they load.

    * In the Pro edition that is a connectivity or misconfiguration issue
    * In the Community edition, since you are not using the Dashboard we
    assume that you use file-based APIs , so in this case it's because
    API definition files are missing.

10. ##### How to import existing keys into Tyk CE

    You can use an API to import existing keys that were not created in Tyk into Tyk's Gateway.
    This doc explains how to do that with the Gateway's APIs directly.

    This example uses standard `authorization` header authentication, and assumes that the Gateway is located at `127.0.0.1:8080` and the Tyk secret is `352d20ee67be67f6340b4c0605b044b7` - update these as necessary to match your environment.

    To import a key called `mycustomkey`, save the JSON contents as `token.json` (see example below), then run the following Curl command:

    The Example `token.json` file

    ```{.json}
    {
    "allowance": 1000,
    "rate": 1000,
    "per": 60,
    "expires": -1,
    "quota_max": -1,
    "quota_renews": 1406121006,
    "quota_remaining": 0,
    "quota_renewal_rate": 60,
    "access_rights": {
        "3": {
        "api_name": "Tyk Test API",
        "api_id": "3"
        }
    },
    "org_id": "53ac07777cbb8c2d53000002",
    "basic_auth_data": {
        "password": "",
        "hash_type": ""
    },
    "hmac_enabled": false,
    "hmac_string": "",
    "is_inactive": false,
    "apply_policy_id": "",
    "apply_policies": [
        "59672779fa4387000129507d",
        "53222349fa4387004324324e",
        "543534s9fa4387004324324d"
        ],
    "monitor": {
        "trigger_limits": []
    }
    }
    ```

    The import of the key to Tyk:

    ```
    curl http://127.0.0.1:8080/tyk/keys/mycustomkey -H 'x-tyk-authorization: 352d20ee67be67f6340b4c0605b044b7' -H 'Content-Type: application/json'  -d @token.json
    ```

    Test the key after the import:

    ```
    curl http://127.0.0.1:8080/quickstart/headers -H 'Authorization: mycustomkey'
    ```

    See also the Keys section of the [Tyk Gateway API documentation](/tyk-gateway-api).


10. ##### Redis persistence using containers

    Use case: Keep my data persistent at Docker container restart

    The Multi-Cloud Redis container is ephemeral, it isn't configured for persistence because it would very quickly get very large (Docker containers in general should really be considered as ephemeral).

    If using Redis with Multi-Cloud we strongly recommend using an external Redis database.

    There are no settings for Redis available via environment variable, you would need to mount a new `redis.conf` into the container to customize the configuration, but again, we don't recommend it.

11. ##### DRL not ready, skipping this notification

    **Description**

    You see the following `Log Warning:`

    `DRL not ready, skipping this notification`


    **Cause**

    There can be a couple of reasons for seeing this error about the [Distributed Rate Limiter](/api-management/rate-limit#rate-limiting-layers):

    1. When you have more than one installation of the Gateway with one configured to use DRL, and others not.
    2. When the Gateway is started and the DRL receives an event before it has finished initialising.

    **Solution**

    For cause **1**, ensure that all instances of the Tyk Gateway are configured to use DRL.

    For cause **2**, the error will disappear when the DRL has initialised. 

12. ##### "Index out of range“ error in logs

    **Description**

    Redis cluster users receive the aforementioned error message in their logs. The log stack may resemble the following:

    ```
        2016/06/22 09:58:41 http: panic serving 10.0.0.1:37196: runtime error: index out of range
        2016/06/22 09:58:41 http: panic serving 10.0.0.1:37898: runtime error: index out of range
        2016/06/22 09:58:41 http: panic serving 10.0.0.1:38013: runtime error: index out of range
        2016/06/22 09:58:42 http: panic serving 10.0.0.1:39753: runtime error: index out of range
        2016/06/22 10:01:07 http: panic serving 10.0.0.1:34657: runtime error: invalid memory address or nil pointer dereference
        2016/06/22 10:01:07 http: panic serving 10.0.0.1:36801: runtime error: invalid memory address or nil pointer dereference
    ```

    **Cause**

    This is due to a bug that prevents the driver from picking up a random redis handle in single-instance connections such as pub/sub. The issue affects later patch releases of Tyk 2.2 and the first release of Tyk 2.3.

    **Solution**

    Users are advised to upgrade to the latest versions of any Tyk packages as a patch was released to resolve this issue. Packages are available to download from [Packagecloud.io](https://packagecloud.io/tyk) and further details on how to upgrade can be found [here](/developer-support/upgrading).

13. ##### Hot restart a Tyk Gateway Process

    It is possible to hot-restart a Tyk Gateway process without dropping any connections. This can be useful if you need to load up a new configuration or change a configuration on a production server without losing any traffic.

    To hot-restart a Tyk Gateway process, you simply need to send a `SIGUSR2` signal to the process, for example:

    ```bash
    > sudo kill -SIGUSR2 `{gateway-pid}`
    ```

    This will fork and load a new process, passing all open handles to the new server and wait to drain the old ones.

14. ##### How to add Custom Certificates to Trusted Storage of Docker Images

    To add your custom Certificate Authority(CA) to your docker containers. You can mount your CA certificate directly into `/etc/ssl/certs` folder.

    Docker: 
    ```{.copyWrapper}
    docker run -it tykio/tyk-gateway:latest \
    -v $(pwd)/myCA.pem:/etc/ssl/certs/myCA.pem
    ```

    Kubernetes - using Helm Chart and secrets:
    ```yaml
    extraVolumes: 
        - name: self-signed-ca
        secret:
            secretName: self-signed-ca-secret
    extraVolumeMounts: 
        - name: self-signed-ca
        mountPath: "/etc/ssl/certs/myCA.pem"
        subPath: myCA.pem
    ```

15. ##### How to change the logging output location

    It's not possible to segregate out the error locations in the `tyk.conf`, but you can modify the actual initialisation files to specify the log location, we supply initialisation scripts for `SysV`, `systemd` and `upstart`.

16. ##### How to clear / invalidate API cache

    Use the REST API to clear the cache

    **OSS**

    ```
    DELETE /tyk/cache/`{api-id}`
    ```

    **Tyk Dashboard**

    ```
    DELETE /api/cache/`{api-id}`
    ```

17. ##### How to find the Gateway logging output

    You are able to see a more detailed output in your Gateway log `/var/log` or `/var/log/upstart`.

## Gateway Error Response Status Codes

Tyk Gateway responses include HTTP status codes that follow the [HTTP status code standard](https://datatracker.ietf.org/doc/html/rfc9110). They have three digits that describe the result of the request and the semantics of the response. 
The first digit defines the class of response as shown in the [list](https://en.wikipedia.org/wiki/List_of_HTTP_status_codes) below:
- 1xx (Informational): The request was received, continuing process
- 2xx (Successful): The request was successfully received, understood, and accepted
- 3xx (Redirection): Further action needs to be taken in order to complete the request
- 4xx (Client Error): The request contains bad syntax or cannot be fulfilled
- 5xx (Server Error): The server failed to fulfill an apparently valid request

Here we provide a list of all the error status codes (4xx and 5xx) that may be returned by the Tyk Gateway along with their corresponding messages and some guidance on the likely cause of the error. 
Tyk supports [error templating](/api-management/gateway-events#error-templates), allowing you to configure the Gateway to return customised messages for certain HTTP error codes.

We also support limited customisation of the error codes and messages returned by custom authentication middleware through the use of [override messages](/tyk-oss-gateway/configuration#override_messages).

| Code | Text                                                                                    | Recommended action                                                                                                                                                             |
| :--- | :-------------------------------------------------------------------------------------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 400  | Access to this API has been disallowed                                                  | Check if the key has access to the right API version or definition. Check if the authentication key used is still valid. Check if the certificate used for authentication is present. Check if the authentication key is created and present in the database. You can use Gateway Keys APIs for confirmation. Check if API definition is using JWT auth and if auth header key and or value is empty or missing.|
| 400  | API is not OAuth2                                                                       | Check if OAuth2 is integrated into the API by auth tokens or using Tyk OAuth flow.                                                                                      |
| 400  | Attempted access with malformed header                                                  | Values not in basic auth format or auth data not encoded correctly.                                                                                                     |
| 400  | Authorization Field Missing                                                             | Check if the authorization field is missing. Check if the OAuth authorization field is missing.                                                                         |
| 400  | Batch request creation failed, request structure malformed                              | Attempted to construct unsafe requests. Check if request structure is in correct format.                                                                                |
| 400  | Batch request malformed                                                                 | Attempted to decode request but failed. Check if request structure is in correct format.                                                                                |
| 400  | Bearer token malformed                                                                  | Check if the OAuth authorization field is malformed.                                                                                                                    |
| 400  | Body do not contain password or username                                                | Check if body contains both password and username. If not, then insert the correct login credentials.                                                                   |
| 400  | Cannot parse form. Form malformed                                                       | Attempted to revoke token but could not parse the request form. Check if the request form is malformed.                                                                 |
| 400  | Content length is not a valid Integer                                                   | Check the value provided in the Content-Length field in the header.                                                                                                |
| 400  | Couldn’t decode instruction                                                             | Attempted to decode policy record from an update request. Check if the request body is malformed and is valid.                                                          |
| 400  | Couldn’t decode OAS object                                                              | Attempted to import OAS Tyk API but failed to retrieve object from request. Check if request body is valid.                                                             |
| 400  | Error API not migrated                                                                  | The supplied API definition is in OAS format. Please use the Tyk native format for this API.                                                                            |
| 400  | Failed to create key, keys must have at least one Access Rights record set              | Attempted to create a key with master keys disabled in configurations.                                                                                                  |
| 400  | Failed to remove the key                                                                | Failed to delete requested key. Make sure orgID and keyname are correct.                                                                                                |
| 400  | Health checks are not enabled for this node                                             | Enable health checks for the gateway.                                                                                                                                   |
| 400  | Key not authorized                                                                      | Check if OAuth key is present. Check if the OAuth client is not deleted. Check if there is a valid policy associated with the key/token used. Check if the policy associated with the key is not expired or if the owner is valid. Check if JWT default policies exist. |
| 400  | Key cannot be used without a certificate                                                | Check if key contains a certificate. If not, add a certificate to the key.                                                                                              |
| 400  | Key must be used with an existent certificate                                           | Check if the certificate on the key exist within the system.                                                                                                            |
| 400  | Missing parameter api_id                                                                | Check if API_ID is missing. If so, fill in the api_ID field with the correct value.                                                                                     |
| 400  | OAuth client doesn’t exist                                                              | Check if API_ID is missing. If so, fill in the api_ID field with the correct value.                                                                                     |
| 400  | OAuth client ID is empty                                                                | Check if OAuth client ID field is empty. If so, fill in with the correct client ID value.                                                                               |
| 400  | OAuth is not enabled for this API                                                       | Check if OAuth is enabled for the API.                                                                                                                                  |
| 400  | Policy access rights doesn’t contain API this OAuth client belongs to                   | Check if the policy rights contains the proper api_ID for the API.                                                                                                      |
| 400  | Request apiID does not match that in Definition! For Update operations these must match | Attempted a PUT operation using different api_ID's. Make sure the api_ID's are the same.                                                                                |
| 400  | Request field is missing                                                                | Check if the request field is missing. If so, fill in the request field.                                                                                                |
| 400  | Request ID does not match that in policy! For Update operations these must match        | Attempted a PUT operation using different policy ID's. Make sure both policy ID's are the same.                                                                         |
| 400  | Request is too large                                                                   | The request body exceeds the configured size limit for the API endpoint.                                                                                                                           |
| 400  | Request with empty authorization header                                                 | Fill in authorization header for the request.                                                                                                                           |
| 400  | Spec field is missing                                                                   | Attempted to trace a request but spec field is missing. Fill in the spec field.                                                                                         |
| 400  | The provided request is empty                                                           | Check if request in the GraphQL playground is correct.                                                                                                                  |
| 401  | Authorization Field Missing                                                             | Check if the authorization field is missing. Check if the OAuth authorization field is missing.                                                                         |
| 401  | Header missing                                                                          | Check if header field exist when making request.                                                                                                                        |
| 401  | Key has expired, please renew                                                           | Current key has expired. Please request for a new key.                                                                                                                  |
| 401  | OAuth Client Id Empty                                                                   | Fill in the Client ID field.                                                                                                                                            |
| 401  | OAuth Client Secret Empty                                                               | Client secret is empty. Insert the required client secret.                                                                                                              |
| 401  | Request signature verification failed                                                   | Possible empty signature header or validation failed.                                                                                                                   |
| 401  | Wrong Password                                                                          | Enter the correct password. Contact an administrator if further help is needed.                                                                                         |
| 403  | Access to this API has been disallowed                                                  | Request access to the API from an administrator.                                                                                                                        |
| 403  | Access to this resource has been disallowed                                             | Request access to the resource from an administrator.                                                                                                                   |
| 403  | Attempted access with non-existent cert                                                 | Check if authentication certificate exist.                                                                                                                              |
| 403  | Attempted administrative access with invalid or missing key!                            | Check if there is correct security credentials of the Tyk API.                                                                                                          |
| 403  | Certificate with SHA256 $certID not allowed                                             | Certificate ID is nil or invalid. Please have a valid certificate.                                                                                                      |
| 403  | Client authorize request in with invalid redirect URI                                   | Check if Auth Redirect URI is malformed or use a valid redirect URI.                                                                                                    |
| 403  | Client TLS certificate is required                                                      | Check if theres multiple APIs on the same domain with no certificates.                                                                                                  |
| 403  | Certificate has expired                                                                 | Please update the certificate with one that is currently valid and has not expired.                                                                                                  |
| 403  | Depth limit exceeded                                                                    | Exceeded the depth limit that has been applied. Check the key/policy global limits and quota section or the API limits and quota section.                               |
| 403  | Empty Signature Header                                                                  | Fill in a signature for auth keys.                                                                                                                                      |
| 403  | Empty Signature Path                                                                    | Check if path for signature is empty.                                                                                                                                   |
| 403  | Failed with 403 after $x-amount of requests over quota                                  | Process request off thread with quota or process request live with rate limit or process request off thread with rate limit.                                            |
| 403  | Found an empty user ID in predefined base field claim user_id                           | Request with valid JWT/RSA or signature/empty user_id/sub claim, or signature/no base field or no sub or no id claim.                                                   |
| 403  | GraphQL Depth Limit Exceeded                                                            | Exceeded the depth limit that has been applied. Check the key/policy global limits and quota section or the API limits and quota section.                               |
| 403  | Invalid Token                                                                           | Check if JWT token is valid and not malformed.                                                                                                                          |
| 403  | Invalid Signature Header                                                                | Insert correct signature header value.                                                                                                                                  |
| 403  | Invalid Signature Path                                                                  | Make sure signature path is correct and valid.                                                                                                                          |
| 403  | Key is not active, please renew                                                         | Create a new key.                                                                                                                                                       |
| 403  | Key not authorised: Unexpected signing method                                           | Invalid JWT signature, JWT access with non-existent key.                                                                                                                |
| 403  | Key not authorised: OAuth client access was revoked                                     | Check if OAuth client exists.                                                                                                                                           |
| 403  | Key not authorised: no matching policy                                                  | Request with invalid policy in JWT, or checking session and identity for valid key for openID.                                                                          |
| 403  | No matching policy found in scope claim                                                 | Check if scope is wrong for JWT request.                                                                                                                                |
| 403  | Quota Exceeded                                                                          | Quota limit has been exceeded. Check quota limit settings.                                                                                                              |
| 403  | Run Go-plugin auth failed                                                               | Used an invalid token for authentication. Please use a valid token to authenticate.                                                                                     |
| 403  | This API version does not seem to exist                                                 | Attempted to extract version data from a request. Version does not exist when loading version data.                                                                     |
| 403  | This organisation access has been disabled, please contact your API administrator       | Organisation session is inactive. Contact API administrator.                                                                                                            |
| 403  | This organisation quota has been exceeded, please contact your API administrator        | Organisation's quota limit has been exceeded. Contact API administrator.                                                                                                |
| 403  | This organisation rate limit has been exceeded, please contact your API administrator   | Organisation's rate limit has been exceeded. Contact API administrator.                                                                                                 |
| 403  | TLS: bad certificate                                                                    | Check if the certificates exist and have valid ID's.                                                                                                                    |
| 403  | Version Information not found                                                           | Checking version data from request. No default version has been set or found.                                                                                           |
| 404  | API doesn’t exist                                                                       | Checking if API exists when rotating OauthClient or if ApiSpec value is nil.                                                                                            |
| 404  | API for this refresh token not found                                                    | When invalidating OAuth refresh or if ApiSpec value is nil.                                                                                                             |
| 404  | API ID not found                                                                        | Check if API ID exists in the Gateway.                                                                                                                                  |
| 404  | API not found                                                                           | Check if API exists.                                                                                                                                                    |
| 404  | Bundle not found                                                                        | No bundles found within the Gateway.                                                                                                                                    |
| 404  | Certificate with given SHA256 fingerprint not found                                     | No certificates exist in the certificate manager list.                                                                                                                  |
| 404  | Couldn't find organisation session in active API list                                   | Attempted to update session object. However, spec for organisation is nil. Make sure to have the correct organisation ID.                                               |
| 404  | Error getting oauth client                                                              | See if OAuth client id exists in the system.                                                                                                                            |
| 404  | Key not found                                                                           | Failed to update hashed key.                                                                                                                                            |
| 404  | No such organisation found in Active API list                                           | Make sure organisation ID is correct.                                                                                                                                   |
| 404  | OAuth client doesn’t exist                                                              | Attempted to retrieve APIs for OAuth or client ID. Client ID was not found                                                                                              |
| 404  | OAuth client ID not found                                                               | Check if OAuth client ID exist in storage. Check if OAuth tokens or client details are valid. Failed to retrieve OAuth client list. Failed to revoke OAuth client list. |
| 404  | Org not found                                                                           | Could not retrieve record of org ID or failed to delete org keys. Spec for org is nil, make sure orgID value is correct                                                 |
| 404  | Policy not found                                                                        | Could not retrieve policy data. Make sure policy ID is correct.                                                                                                         |
| 404  | There is no such key found                                                              | Check if key is already deleted. Check if hashed key has been deleted already.                                                                                          |
| 404  | Version Does Not Exist                                                                  | Check if version path is filled and correct.                                                                                                                            |
| 405  | Malformed request body                                                                  | Attempted a POST request with a malformed request body. Make sure the request body is valid.                                                                            |
| 405  | Method not supported                                                                    | Attempting to add a method that is not supported by our system.                                                                                                         |
| 411  | Content length is required for this request                                             | You need to provide the `Content-Length` field in the request header.                                                                                                         |
| 429  | API Rate Limit Exceeded                                                                 | Check the rate of the requests on the API level. Check the rate of requests on the API key (Auth token, certs, etc).                                                    |
| 499  | Client closed request                                                                   | Check if the client closed the TCP connection                                                                                                                           |
| 500  | Cache invalidation failed                                                               | Attempted to scan or delete the cache, which failed, causing cache invalidation to fail.                                                                                |
| 500  | Can't detect loop target                                                                | Verify target API exsists. Check if URL scheme is "tyk://". Refer to 404 errors                                                                                         |
| 500  | Could not write key data                                                                | Failed to update hashed key. Make sure key name is valid.                                                                                                               |
| 500  | Delete failed                                                                           | Attempted to delete policy with invalid filename. Attempted to delete API with invalid filename. Attempted to delete OAuth Client with incorrect OAuth client ID.       |
| 500  | Due to enabled service policy source, please use the Dashboard API                      | Attempted to add/update a policy and rejected due to Policysource=service. Please use the Dashboard API.                                                                |
| 500  | Due to enabled use_dp_app_configs, please use Dashboard API                             | When trying to import OAS, when Dashboard config is set to true. Please use Dashboard API.                                                                              |
| 500  | Error writing to key store                                                              | Attempted to update session with a new session. Make sure orgID is correct.                                                                                             |
| 500  | Failed to create file                                                                   | When add/update policy, failed to create a file. Make sure the policy file path is correct                                                                              |
| 500  | Failed to create key                                                                    | Check if key already exist or if the key exists with a given certificate. Ensure security settings are correct                                                          |
| 500  | Failure in storing client data                                                          | Attempted to store data when creating a new OAuth client but failed. Make sure the storageID, or orgID is correct and valid.                                            |
| 500  | Get client tokens failed                                                                | Failed to retrieve OAuth tokens. Make sure client ID is valid or keyName is valid.                                                                                      |
| 500  | Marshalling failed                                                                      | Attempted to import printDef but failed. Marshalling of policy failed. Unmarshal object into the file failed when writing to file.                                      |
| 500  | There was a problem proxying the request                                                | Check if the target URL is unavailable to the Gateway.                                                                                                                  |
| 500  | Unmarshalling failed                                                                    | Key creation failed. Failed to create OAuth client. Failed to update OAuth client.                                                                                      |
| 500  | Unsupported schema, unable to validate                                                  | Check if GraphQL schema is valid.                                                                                                                                       |
| 500  | Upstreaming host lookup failed                                                          | Check if the target URL is not resolvable in DNS.                                                                                                                       |
| 503  | Service temporarily unavailable                                                         | Check if a circuit breaker middleware is enforced.                                                                                                                      |
| 503  | All hosts are down                                                                      | Attempted to reverse proxy a URL rewrite to a scheme and host, but all the hosts in hostlist are down.                                                                  |
| 504  | Upstream service reached hard timeout                                                   | Timeout awaiting response headers during a request round trip.                                                                                                          |
| 507  | Status Insufficient Storage                                                             | Attempted to update an API through a POST request but failed to due insufficient storage.                                                                               |


## Dashboard

1. ##### Can't update policy. Please ensure at least one access rights setting is set

    **Description**

    Users receive this error when attempting to create a new Policy on the Dashboard.

    **Cause**

    The Access Rights field is a required setting for a policy.

    **Solution**

    Users should first [create a new API](/api-management/gateway-config-managing-classic#create-an-api) and then [create a new policy](/api-management/gateway-config-managing-classic#secure-an-api) with an existing API in the Access Rights.

2. ##### Dashboard not showing any analytics data

    **Description**

    The user is unable to see analytics data from a particular time period in the Dashboard

    **Cause**

    Missing analytics data could be caused by a number of different reasons:

    * Gateway incorrectly configured
    * Pump incorrectly configured
    * Pump service not running
    * Dashboard incorrectly configured
    * MDCB incorrectly configured
    * Browser caching stale data

    **Solution**

    **Gateway incorrectly configured**

    Ensure the Gateway `tyk.conf` has:

    * `enable_analytics` set to `true`. This sets the Gateway to record analytics data.
    * `analytics_config.storage_expiration_time` set to a value larger than the Pump's `purge_delay`. This allows the analytics data to exist long enough in Redis to be processed by the Pump.
    * `analytics_config.ignored_ips` set to `[]`. This ensures the Gateway will create analytics for requests from any IP address. 
    * `enforce_org_data_age` set to `false`. This prevents the data from being removed based on it reaching a certain age.

    **Pump incorrectly configured**

    Ensure the Pump `pump.conf` has:

    * `analytics_storage_type` set to `redis`.
    * `analytics_storage_config` settings are set to the same Redis instance that the Gateway is connected to.

    **Pump service not running**

    Ensure the Pump service is running.

    **Dashboard incorrectly configured**

    Ensure the Dashboard `tyk_analytics.conf` has:

    * `mongo_url` set to the same MongoDB instance that the Pump is connected to.

    **MDCB incorrectly configured**

    For scenarios where MDCB is used, ensure the `sink.conf` has:

    * `analytics.mongo_url` set to the same MongoDB instance that the Dashboard is connected to.
    * `forward_analytics_to_pump` set to the correct value for your solution. `false` if MDCB is directly recording the analytics itself, `true` if it is forwarding analytics data for the Pump to process. For the forwarding scenario, set the `storage` settings to the same Redis instance that the Pump is connected to.

    **Browser caching stale data**

    Try restarting your browser, or using a private session.

    You can also try restarting the Dashboard service.

    **Troubleshooting tip**

    Check if MongoDB contains analytics data by running the following query (but update the date parameter first):

    ```{.copyWrapper}
    db.getCollection('tyk_analytics_aggregates').find({timestamp: {$gte: new ISODate("2016-09-26T23:59:00Z")}})
    ```

    The query gets all aggregated analytics data from the date provided, so if you set it to yesterday you will get all data since yesterday. The data must be in the ISO format.

3. ##### Fatal - Dashboard and portal domains cannot be the same

    **Description**

    The Tyk Dashboard service will not start and displays a fatal error as follows:

    ```
    FATAL Dashboard and portal domains cannot be the same. 
    Dashboard domain: tyk-dashboard.com, Portal domain: tyk-dashboard.com
    ```

    **Cause**

    Tyk's developer portal UI needs to run on either a different subdomain or different domain name to the dashboard UI.

    Tyk's Dashboard service may be run in a multi-tenant configuration, and each tenant may have their own developer portals.

    The Dashboard service determines which portal to load based on the `Host` header in the request by the browser. If this
    conflicts with the hostname of the dashboard UI the dashboard service will not know whether to serve the dashboard or
    developer portal.

    **Solution**

    Firstly, we will need to disable hostnames from within the Dashboard configuration file in order to get the dashboard
    service started again.

    Change `host_config.enable_host_names` from `true` to `false`
    ```
    "host_config": {
    "enable_host_names": true,    <------ CHANGE TO false
    ...
    ...
    },
    ```

    You should now be able to start the Dashboard service.

    Navigate to the Dashboard via it's public IP address and log-in.

    Change your portal domain to something different - e.g. `portal.tyk-dashboard.com`

    Edit the Dashboard configuration file to re-enable host names.

    Restart the Dashboard service.

4. ##### Internal TIB SSO User unable to log in

    **Description**

    After creating an SSO Identity profile in the Tyk Dashboard, a user is unable to log in to the Dashboard or the Developer Portal

    **Cause**

    One potential cause is that the `DashboardCredential` setting has not been populated with the user's Tyk Dashboard API Access Credentials.
    You can check this from:

    1. From the Dashboard menu, select the Identity Management option
    2. Edit the profile you created
    3. Select the Raw Editor
    4. Check to see if the `DashboardCredential` setting is set

    <img src="img/2.10/identity_profile2.png" alt="DashboardCredentials" />



    **Workaround Solution**

    If, as above, the `DashboardCredential` setting is empty (`"DashboardCredential": ""`), you can manually add the user's Tyk Dashboard API Access Credentials by performing the following:

    1. From the System Management > Users menu, select Actions > Edit from the user whose credentials you want to use
    2. Copy the **Tyk Dashboard API Access Credentials** value

    <img src="img/2.10/user_api_credentials.png" alt="User API Access Credentials" />

    3. Paste this into the Raw editor for the `DashboardCredential` setting. For example - `"DashboardCredential": "887dad0de40b4ff05b6b50739b311099"`
    4. Click **Update**
    5. The user should now be able to log in to the Dashboard/Portal

    


    This issue is due to be fixed in an up coming release




5. ##### Key object validation failed, most likely malformed input error

    **Description**

    The user is getting error as `Key object validation failed, most likely malformed input` when calling the Dashboard API.

    **Cause**

    Issue caused by invalid character passed in the JSON body of the request.

    **Solution**

    Validate the JSON using JSON validator.

    Further, please see [this community forum post](https://community.tyk.io/t/error-creating-new-api-through-dashboard-rest-api/1555/2) for additional guidance.

